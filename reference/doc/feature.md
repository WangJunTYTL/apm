
## 监控系统的设计考虑

监控系统的主要目的是帮助我们做系统性能分析,它不可以影响到我们主要的业务执行.在设计时,我研究了perf4j和我们国内一家公司出的监控系统[cat](https://github.com/WangJunTYTL/cat),综合我们自己
在计划做一套监控系统时大家所提出的建议.这里我总结一下在设计监控系统时需要考虑的因素


### 监控系统四大模块

1. 性能数据收集
2. 性能数据分析
3. 输出分析结果
4. 预警

在设计系统时,注意模块化的结构,在研究pef4j和国内的cat,都在这方面做的很好

### 采集性能数据

这个模块的设计好坏直接决定了后面的模块设计.在设计初期,需要考虑性能数据是否需要全量采集,还是只需要进行抽样样采集.如果全量采集性能数据也许很快你的系统会收集的Tb的级别.在这里perf4j默认采用的策略是全量采集,你也可以根据需要
设计最大的采集大小,然后在本地分析出结果,并不需要一定把采集的数据记录起来.所以perf4j在这点的设计很值得借鉴.


### 性能数据分析

监控系统是否支持实时监控,这点很重要,最棒的监控系统都会支持实时.实时的监控数据和历史的监控数据结合很容易帮组我们做好系统分析

另外:性能数据的分析也许是一个计算量很大的事情,perf4j在本地做好了单位时间的初步分析,我们在进行二次分析,比如分析一天的一周的数据,这样就可以帮助我们减少很多的计算量

对于一个好的监控数据,也有必要指导怎样去使用,比如一个web服务,我们应该分为各种组件的监控:比如一个api服务,我们需要分模块监控DB,Cache,到最上层的业务view层的调用量与相应时间,这样才可以最快的最省人力的帮助我们分析出性能的瓶颈区是在哪个环节


















