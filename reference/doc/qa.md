# 常见问题

## 1.perf4j的性能数据为啥选用sqlite,而不是其它功能更强大的数据库?
  
perf4j目前还是一个比较简单实用的监控项目，用于满足一般公司的业务监控，足矣支撑业务量单机TPS在1000内。在实际的生成环境中，我们一般会做到
按照单位时间内【一般是60s】进行一次性能分析，sqlite对于支撑这样的数据写入速度且在本地进行写入，不存在性能问题。而对于读取数据，我们一般会读取最近一小时、最近几个小时、或者最近
几天的监控数据。对于这样的要求，sqlite可以按照时间线快速读取这样的数据。

但是如果要求做到数据汇总和聚合，可以做到按天、按周、按月、甚至按年进行聚合，那么sqlite就无法支撑了，而且对于这样的监控系统设计业务涉及到性能数据由每台节点的数据进行集中汇总到一个地方和选用支撑大数据
量的存储且支持快速检索的数据库产品，比如通过flume和elasticsearch可以把数据汇总到一起然后来支称这样的要求，如果有这样的要求可以考虑进行扩展。

## 2.perf4j会影响到业务本身的性能吗？

perf4j是一个开源的性能数据采集和分析工具，已经被很多开发者使用，性能问题是经过大家验证过的。perf4j集成日志组件来对性能数据的采集然后收集到一个BlockQueue集合，你可以设置该集合最大的大小，默认是1024，再由一个异步线程在后台不断从BlockQueue拖拽到另外一个集合进行初步分析，不会
阻塞主业务的运行


## 3.怎样利用perf4j健康db、redis、tomcat等常用组件？

对这些组件的监控，需要你在使用这些组件时自己进行埋点，比如web服务可以在全局的filter进行拦截，对每一个请求的url地址进行监控。
